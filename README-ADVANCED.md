# BIM 3D Viewer Pro - Advanced Version

Dalux와 유사한 전문가급 BIM 3D 뷰어 프로그램입니다. 고급 기능과 프로페셔널한 UI를 제공합니다.

## 🚀 새로운 고급 기능

### 1. **객체 탐색기 & 필터링**
   - **실시간 검색**: 객체 이름, 타입, 카테고리로 검색
   - **카테고리별 분류**: 자동으로 객체를 카테고리별로 분류
     - Walls, Floors, Roofs, Doors, Windows
     - Columns, Beams, Stairs, Railings
     - Furniture, Other
   - **레이어 관리**: 카테고리별 표시/숨김
   - **카테고리별 색상**: 각 카테고리를 고유 색상으로 표시
   - **객체 목록**: 모든 객체를 트리 뷰로 표시
   - **개별 객체 제어**: 객체별 표시/숨김 토글

### 2. **뷰포인트 관리**
   - **뷰 저장**: 현재 카메라 위치와 각도 저장
   - **부드러운 전환**: 저장된 뷰포인트로 애니메이션 이동
   - **로컬 저장**: LocalStorage에 자동 저장
   - **내보내기/가져오기**: JSON 형식으로 뷰포인트 공유
   - **뷰포인트 관리**: 이름 변경, 삭제, 순서 변경

### 3. **스크린샷 & 캡처**
   - **일반 스크린샷**: 현재 화면 PNG로 저장
   - **고해상도 캡처**: 2x, 4x 배율 스크린샷
   - **360도 뷰**: 전방위 뷰 자동 캡처
   - **단축키 지원**: Ctrl+S로 빠른 스크린샷

### 4. **주석 & 마크업**
   - **3D 주석**: 모델 위에 직접 주석 추가
   - **컬러 마커**: 주석 위치에 색상 구분 마커
   - **라벨 표시**: 항상 카메라를 향하는 텍스트 라벨
   - **주석 관리**: 목록에서 주석 클릭으로 해당 위치 이동
   - **내보내기**: JSON 형식으로 주석 저장 및 공유

### 5. **측정 도구**
   - **거리 측정**: 두 점 사이의 정확한 거리
   - **면적 계산**: 객체의 표면적 자동 계산
   - **부피 계산**: 3D 객체의 부피 계산
   - **경계 상자**: 객체의 바운딩 박스 부피
   - **실시간 프리뷰**: 측정 중 미리보기 표시
   - **결과 패널**: 측정 결과를 패널에 표시

### 6. **단면 뷰**
   - **3축 절단**: X, Y, Z 축 독립적으로 절단
   - **실시간 조절**: 슬라이더로 즉시 적용
   - **다중 평면**: 여러 평면 동시 적용 가능
   - **단면 시각화**: 절단면 평면 시각적 표시

### 7. **충돌 감지**
   - **자동 감지**: 모든 객체 간 충돌 자동 검사
   - **거리 기반**: 설정 가능한 충돌 임계값
   - **시각적 하이라이트**: 충돌 객체를 빨간색으로 강조
   - **충돌 마커**: 충돌 위치에 3D 마커 표시
   - **상세 리포트**: 충돌 목록과 상세 정보
   - **리포트 내보내기**: JSON 형식으로 결과 저장

### 8. **IFC 속성 뷰어**
   - **상세 정보**: 객체의 모든 속성 표시
   - **IFC 데이터**: IFC 파일의 메타데이터 접근
   - **실시간 업데이트**: 선택 시 즉시 업데이트
   - **위치/회전/스케일**: 변환 정보 표시

### 9. **향상된 UI/UX**
   - **3패널 레이아웃**: 좌측 탐색기, 중앙 뷰어, 우측 속성
   - **탭 인터페이스**: 속성, 뷰포인트, 주석을 탭으로 구분
   - **접을 수 있는 사이드바**: 작업 공간 최대화
   - **다크 테마**: 전문가용 어두운 UI
   - **아이콘 버튼**: 직관적인 이모지 아이콘
   - **툴팁**: 모든 버튼에 설명 제공
   - **상태 표시**: 활성 도구를 시각적으로 표시

### 10. **키보드 단축키**
   - `W/S/A/D`: 카메라 전후좌우 이동
   - `Q/E`: 카메라 위/아래 이동
   - `R`: 카메라 위치 리셋
   - `ESC`: 선택 해제 / 도구 종료
   - `F`: 선택한 객체로 포커스
   - `H`: 선택한 객체 숨김/표시
   - `Ctrl+S`: 스크린샷 저장
   - `Ctrl+V`: 뷰포인트 저장

## 📁 프로젝트 구조

```
Dalux-viewer/
├── index.html                    # 기본 버전
├── index-advanced.html           # 고급 버전 ⭐
├── package.json
├── vite.config.js
├── README.md                     # 기본 문서
├── README-ADVANCED.md           # 고급 기능 문서 ⭐
├── Sample-Test-Files-main/      # IFC 샘플 파일
└── src/
    ├── main.js                   # 기본 뷰어
    ├── main-advanced.js         # 고급 뷰어 ⭐
    ├── IFCLoader.js             # IFC 파일 로더
    ├── ViewerControls.js        # 키보드 컨트롤
    ├── MeasurementTool.js       # 측정 도구
    ├── SectionTool.js           # 단면 도구
    ├── ObjectExplorer.js        # 객체 탐색기 ⭐
    ├── ViewpointManager.js      # 뷰포인트 관리 ⭐
    ├── ScreenshotTool.js        # 스크린샷 ⭐
    ├── AnnotationTool.js        # 주석 도구 ⭐
    ├── AreaVolumeTool.js        # 면적/부피 계산 ⭐
    ├── CollisionDetector.js     # 충돌 감지 ⭐
    └── styles/
        └── advanced.css          # 고급 스타일 ⭐
```

## 🛠️ 설치 및 실행

### 1. 의존성 설치
```bash
npm install
```

### 2. 개발 서버 실행
```bash
npm run dev
```

### 3. 브라우저 접속
- 기본 버전: `http://localhost:3000`
- 고급 버전: `http://localhost:3000/index-advanced.html` ⭐

### 4. 프로덕션 빌드
```bash
npm run build
```

## 📖 사용 가이드

### IFC 파일 로드
1. 상단 툴바에서 "📂 IFC 파일 열기" 클릭
2. `Sample-Test-Files-main` 폴더에서 IFC 파일 선택
3. 자동으로 모델 로드 및 분석 시작

### 객체 탐색 및 검색
1. 좌측 사이드바의 "객체 탐색기" 사용
2. 검색창에 키워드 입력 (예: "wall", "door")
3. 카테고리별로 필터링
4. 객체 클릭으로 선택 및 정보 확인

### 뷰포인트 저장
1. 원하는 위치로 카메라 이동
2. 우측 사이드바에서 "뷰포인트" 탭 선택
3. "+ 현재 뷰 저장" 클릭
4. 이름 입력 후 저장
5. 저장된 뷰포인트 클릭으로 이동

### 측정하기
1. 툴바에서 "📏 측정" 클릭
2. 시작점 클릭
3. 끝점 클릭
4. 거리가 자동으로 표시됨

### 면적/부피 계산
1. 툴바에서 "📐 면적/부피" 클릭
2. 측정할 객체 클릭
3. 결과 패널에서 확인

### 주석 추가
1. 툴바에서 "💬 주석" 클릭
2. 주석을 추가할 위치 클릭
3. 텍스트 입력
4. 3D 마커와 라벨 자동 생성

### 단면 보기
1. 툴바에서 "✂️ 단면" 클릭
2. 좌측 하단 패널에서 X, Y, Z 슬라이더 조절
3. 실시간으로 모델 절단

### 충돌 감지
1. IFC 파일 로드 후
2. 툴바에서 "⚠️ 충돌 감지" 클릭
3. 자동으로 모든 객체 검사
4. 충돌된 객체는 빨간색으로 하이라이트
5. 리포트 패널에서 상세 정보 확인

### 스크린샷
- 툴바: "📸 스크린샷" 클릭
- 키보드: `Ctrl+S`

### 카테고리별 색상
1. 툴바에서 "🎨 색상" 클릭
2. 각 카테고리가 고유 색상으로 표시됨

## 🎨 추천 워크플로우

### 1. 프로젝트 검토
```
1. IFC 파일 로드
2. 전체 모델 확인 (카메라 회전/줌)
3. 객체 탐색기로 구조 파악
4. 주요 뷰포인트 저장
```

### 2. 상세 분석
```
1. 카테고리별로 레이어 필터링
2. 특정 객체 선택 및 속성 확인
3. 면적/부피 계산
4. 측정 도구로 치수 확인
```

### 3. 문제점 발견
```
1. 충돌 감지 실행
2. 문제 위치에 주석 추가
3. 스크린샷으로 증거 저장
4. 리포트 내보내기
```

### 4. 프레젠테이션
```
1. 주요 뷰포인트 저장
2. 각 뷰에서 스크린샷
3. 주석으로 설명 추가
4. 뷰포인트 순서대로 발표
```

## 🔧 기술 스택

- **Three.js** v0.149.0 - 3D 렌더링
- **web-ifc** v0.0.53 - IFC 파일 파싱
- **web-ifc-three** v0.0.125 - IFC ↔ Three.js 통합
- **Vite** v5.0.0 - 빌드 도구
- **LocalStorage API** - 데이터 저장
- **Canvas API** - 스크린샷 및 라벨

## 📊 성능 최적화

- **LOD (Level of Detail)**: 거리에 따른 디테일 조절
- **Frustum Culling**: 화면 밖 객체 렌더링 제외
- **Object Pooling**: 재사용 가능한 객체 풀
- **Lazy Loading**: 필요할 때만 로드
- **Web Worker**: 무거운 계산을 백그라운드 처리 (예정)

## 🐛 알려진 이슈

1. **대용량 IFC 파일**: 100MB 이상 파일은 로딩이 느릴 수 있음
2. **충돌 감지**: 1000개 이상 객체에서는 시간이 걸림
3. **브라우저 호환성**: Chrome, Edge 권장 (Firefox, Safari는 일부 기능 제한)

## 🔮 향후 계획

- [ ] 다중 IFC 파일 동시 로딩
- [ ] 애니메이션 카메라 경로 (워크스루)
- [ ] 미니맵 네비게이션
- [ ] VR/AR 모드
- [ ] 클라우드 저장 (Firebase)
- [ ] 실시간 협업 (WebSocket)
- [ ] PDF 리포트 자동 생성
- [ ] BCF (BIM Collaboration Format) 지원
- [ ] 시간 기반 시뮬레이션 (4D BIM)
- [ ] 비용 정보 통합 (5D BIM)

## 📝 라이선스

MIT License

## 🤝 기여

이슈와 PR을 환영합니다!

## 📧 문의

프로젝트 관련 문의사항이 있으시면 이슈를 등록해주세요.

---

**Made with ❤️ for BIM professionals**
